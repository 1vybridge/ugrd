#compdef ugrd

# Read over each line of the output of ug --dump_args
# split the line after the first space
# the first part is the option, the second part is the description
base_args=()
while read -r line; do
	option=$(echo $line | cut -d' ' -f1)
	description=$(echo $line | cut -d' ' -f2-)
	base_args+=("${option}[$description]")
done <<< "$(ugrd --dump_args)"

args=("-c[Config file location.]:config file:_files"
	"--config[Config file location.]:config file:_files"
	"--kernel-version[Set the kernel version.]:kernel version:_files -W /lib/modules -/"
	"--kver[Set the kernel version.]:kernel version:_files -W /lib/modules -/"
	"--log-file[Specify a log file.]"
	"--log-level[Specify log level.]")

args+=($base_args[@])

_arguments "${args[@]}"
